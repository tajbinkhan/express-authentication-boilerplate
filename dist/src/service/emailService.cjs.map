{"version":3,"sources":["../../../src/service/emailService.ts"],"sourcesContent":["import ejs from \"ejs\";\nimport nodemailer from \"nodemailer\";\nimport path from \"path\";\n\nconst __dirname = process.cwd();\nconst templatesPath = path.join(__dirname, \"public/templates\");\n\ninterface EmailService {\n\temail: string;\n\temailSubject: string;\n\ttemplate: string;\n\tdata?: any;\n\tuser?: string;\n\tpassword?: string;\n\temailFrom?: string;\n}\n\nconst sendEmail = async ({\n\temail,\n\temailSubject,\n\ttemplate,\n\tdata,\n\tuser = process.env.EMAIL_SERVER_USER,\n\tpassword = process.env.EMAIL_SERVER_PASSWORD,\n\temailFrom = process.env.EMAIL_FROM\n}: EmailService) => {\n\t// Configure your email transporter (replace placeholders with actual values)\n\tconst transporter = nodemailer.createTransport({\n\t\thost: process.env.EMAIL_SERVER_HOST,\n\t\tport: Number(process.env.EMAIL_SERVER_PORT),\n\t\tauth: {\n\t\t\tuser,\n\t\t\tpass: password\n\t\t},\n\t\tsecure: false\n\t});\n\n\tconst html = await ejs.renderFile(path.join(templatesPath, `${template}.ejs`), data, {\n\t\tasync: true\n\t});\n\n\t// Email content\n\tconst mailOptions = {\n\t\tfrom: emailFrom,\n\t\tto: email,\n\t\treply_to: emailFrom,\n\t\tsubject: emailSubject,\n\t\thtml\n\t};\n\n\t// Send the email\n\ttry {\n\t\tconst report = await transporter.sendMail(mailOptions);\n\t\tconsole.log(\"Email sent: %s\", report.messageId);\n\t\treturn Promise.resolve(report);\n\t} catch (error) {\n\t\treturn Promise.reject(error);\n\t}\n};\n\nexport default sendEmail;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAgB;AAChB,wBAAuB;AACvB,kBAAiB;AAEjB,IAAM,YAAY,QAAQ,IAAI;AAC9B,IAAM,gBAAgB,YAAAA,QAAK,KAAK,WAAW,kBAAkB;AAY7D,IAAM,YAAY,OAAO;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAO,QAAQ,IAAI;AAAA,EACnB,WAAW,QAAQ,IAAI;AAAA,EACvB,YAAY,QAAQ,IAAI;AACzB,MAAoB;AAEnB,QAAM,cAAc,kBAAAC,QAAW,gBAAgB;AAAA,IAC9C,MAAM,QAAQ,IAAI;AAAA,IAClB,MAAM,OAAO,QAAQ,IAAI,iBAAiB;AAAA,IAC1C,MAAM;AAAA,MACL;AAAA,MACA,MAAM;AAAA,IACP;AAAA,IACA,QAAQ;AAAA,EACT,CAAC;AAED,QAAM,OAAO,MAAM,WAAAC,QAAI,WAAW,YAAAF,QAAK,KAAK,eAAe,GAAG,QAAQ,MAAM,GAAG,MAAM;AAAA,IACpF,OAAO;AAAA,EACR,CAAC;AAGD,QAAM,cAAc;AAAA,IACnB,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,UAAU;AAAA,IACV,SAAS;AAAA,IACT;AAAA,EACD;AAGA,MAAI;AACH,UAAM,SAAS,MAAM,YAAY,SAAS,WAAW;AACrD,YAAQ,IAAI,kBAAkB,OAAO,SAAS;AAC9C,WAAO,QAAQ,QAAQ,MAAM;AAAA,EAC9B,SAAS,OAAO;AACf,WAAO,QAAQ,OAAO,KAAK;AAAA,EAC5B;AACD;AAEA,IAAO,uBAAQ;","names":["path","nodemailer","ejs"]}